# Modbus 데이터 모델 완벽 가이드

Modbus 프로토콜은 산업 현장에서 장비 간 통신을 위해 가장 널리 사용되는 표준입니다. 데이터를 주고받을 때 사용하는 **4가지 메모리 영역(Data Model)**을 이해하는 것이 핵심입니다.

## 1. Coils (코일)
- **주소 범위**: 00001 ~ 09999 (0xxxxx)
- **데이터 타입**: **1비트 (Bit)** - ON(1) 또는 OFF(0)
- **접근 권한**: **읽기 / 쓰기 가능 (Read/Write)**
- **비유**: **"전등 스위치"**
    - 내가 눌러서 켤 수도 있고(Write), 지금 켜져 있는지 눈으로 확인할 수도 있음(Read).
- **주요 용도**:
    - 장비 제어 (모터 기동/정지, 밸브 열림/닫힘)
    - 램프, 부저 제어
    - **[현재 프로젝트]**: 컵 디스펜서 작동, 제빙기 버튼 누르기, 시럽 펌프 작동 등.

## 2. Discrete Inputs (디스크리트 입력)
- **주소 범위**: 10001 ~ 19999 (1xxxxx)
- **데이터 타입**: **1비트 (Bit)** - ON(1) 또는 OFF(0)
- **접근 권한**: **읽기 전용 (Read Only)**
- **비유**: **"현관 초인종"**
    - 밖에서 누가 눌렀는지(ON) 안 눌렀는지(OFF) 알 수는 있지만, 집 안에서 초인종을 억지로 '눌린 상태'로 바꿀 수는 없음.
- **주요 용도**:
    - 물리적 스위치 상태 확인
    - 근접 센서, 포토 센서 감지 여부
    - **[현재 프로젝트]**: 컵이 컵홀더에 제대로 놓였는지 확인하는 센서.

## 3. Holding Registers (홀딩 레지스터)
- **주소 범위**: 40001 ~ 49999 (4xxxxx)
- **데이터 타입**: **16비트 (Word)** - 0 ~ 65535 사이의 숫자
- **접근 권한**: **읽기 / 쓰기 가능 (Read/Write)**
- **비유**: **"에어컨 희망 온도 설정"**
    - 리모컨으로 24도로 맞출 수도 있고(Write), 지금 몇 도로 설정되어 있는지 볼 수도 있음(Read).
- **주요 용도**:
    - 설정값 변경 (모터 속도, 목표 온도, 타이머 시간)
    - 파라미터 제어
    - **[현재 프로젝트]**: 로봇 팔(IndyDCP)에 이동 명령(`REG_CMD`)을 보내거나 상태 코드(`REG_STAT`)를 읽을 때 사용.

## 4. Input Registers (입력 레지스터)
- **주소 범위**: 30001 ~ 39999 (3xxxxx)
- **데이터 타입**: **16비트 (Word)** - 0 ~ 65535 사이의 숫자
- **접근 권한**: **읽기 전용 (Read Only)**
- **비유**: **"벽걸이 온도계"**
    - 현재 온도가 28도라고 보여주는데(Read), 내가 바늘을 돌려서 24도로 바꿀 수는 없음. 날씨가 변해야만 바뀜.
- **주요 용도**:
    - 아날로그 센서 값 모니터링 (현재 온도, 습도, 압력, 유량)
    - 전압, 전류 측정값

---

## 요약 표

| 데이터 모델 | 주소 (예시) | 타입 | 읽기/쓰기 | 용도 (키워드) | 비유 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **Coils** | 0xxxxx | 1 Bit | R / W | **디지털 출력 (DO)** | 전등 스위치 |
| **Discrete Inputs** | 1xxxxx | 1 Bit | Read Only | **디지털 입력 (DI)** | 초인종 |
| **Holding Registers** | 4xxxxx | 16 Bit | R / W | **아날로그 출력 (AO)** | 희망 온도 설정 |
| **Input Registers** | 3xxxxx | 16 Bit | Read Only | **아날로그 입력 (AI)** | 현재 온도계 |
